<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.9.0"><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="任风雨飘摇 我自怡然不动"><title>JSX | 庚庚</title><link rel="stylesheet" type="text/css" href="../../../../css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/normalize/8.0.1/normalize.min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//lib.baomitu.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//lib.baomitu.com/jquery/3.4.0/jquery.min.js"></script><link rel="icon" mask sizes="any" href="../../../../favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="../../../../favicon.ico"><link rel="apple-touch-icon" href="../../../../apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="../../../../apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="../../../../atom.xml"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">JSX</h1><a id="logo" href="../../../../.">庚庚</a><p class="description">任风雨飘摇 我自怡然不动</p></div><div id="nav-menu"><a class="current" href="../../../../."><i class="fa fa-home"> 首页</i></a><a href="../../../../archives/"><i class="fa fa-archive"> 归档</i></a><a href="../../../../about/"><i class="fa fa-user"> 关于</i></a><a href="../../../../atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">JSX</h1><div class="post-meta">Apr 5, 2018<span> | </span><span class="category"><a href="../../../../categories/学习/">学习</a></span><script src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> 阅读</span></span><span class="post-time"><span class="post-meta-item-text"> | </span><span class="post-meta-item-icon"><i class="fa fa-keyboard-o"></i><span class="post-count"> 2,055</span><span class="post-meta-item-text"> 字</span></span></span><span class="post-time"> | <span class="post-meta-item-icon"><i class="fa fa-hourglass-half"></i><span class="post-count"> 10</span><span class="post-meta-item-text"> 分钟</span></span></span></div><div class="post-content"><blockquote>
<p>学了React有差不多俩星期了，做个总结。</p>
</blockquote>
<h3 id="什么是JSX"><a href="#什么是JSX" class="headerlink" title="什么是JSX"></a>什么是JSX</h3><p>JSX=JavaScriptXml<br><br>JSX可以理解为在JS中编写与XML语言类似的语言，他并不能被浏览器识别，他的目的是通过编译器将这些标记变异成标准的JS语言。换句话说他是js语法的拓展。</p>
<a id="more"></a>
<h3 id="javascript表达式"><a href="#javascript表达式" class="headerlink" title="javascript表达式"></a>javascript表达式</h3><p>要使用Javascript表达式作为属性值，只需要把这个表达式用一对大括号（{}）包起来，不要用引号（””）。求职表达式本身和JSX没啥关系，是JS中的特性。他是会返回值的表达式，与语句本质的不同，在编写JSX时，在 { } 中不能使用语句（if语句、for语句等等）。我们不能直接使用语句，但可以把语句包裹在函数求值表达式中运用。建议把函数表达式独立出来，在 { } 调用。</p>
<h3 id="关于用法和注意事项"><a href="#关于用法和注意事项" class="headerlink" title="关于用法和注意事项"></a>关于用法和注意事项</h3><p>官网有一篇深入JSX<a href="https://doc.react-china.org/docs/jsx-in-depth.html" target="_blank" rel="noopener">点击这里</a></p>
<h3 id="组件是啥"><a href="#组件是啥" class="headerlink" title="组件是啥"></a>组件是啥</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">console.log(&lt;App/&gt;)</span><br></pre></td></tr></table></figure>
<p>如图所示：<br><img src="https://xuyonglinblog.oss-cn-beijing.aliyuncs.com/cosole.log%28APP%29.png" alt></p>
<p>as  we  can see，组件并不是我们之前传统开发模式下的可复用的HTML+CSS，而是单纯的js对象，或者说虚拟DOM。<br>接下来<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">console.log(&lt;ToDoList name=&#123;<span class="string">'todo'</span>&#125; onClick=&#123;()=&gt;&#123;console.log(<span class="string">'ss'</span>)&#125;&#125;/&gt;)&lt;br&gt;</span><br></pre></td></tr></table></figure></p>
<p>在组件里添加属性和方法，(ToDoList是之前写的一个小组件)，在控制台上可以看到。<br><img src="https://xuyonglinblog.oss-cn-beijing.aliyuncs.com/JSX.png" alt>;<br>可以看到props里多了name和事件onClick，这也就是React声明组件属性和方法的方式，从这一点来看Vue还要去props里注册要省事一点。<br>可以看到组件对象里还有一些其他的属性，这些是用来干嘛的呢？O98k，打开<a href="https://babeljs.io/repl" target="_blank" rel="noopener">在线Babel编译器</a>，输入<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">hello</span></span>()&#123;</span><br><span class="line">  <span class="built_in">return</span> (&lt;div&gt;hello&lt;/div&gt;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>可以看到<img src="https://xuyonglinblog.oss-cn-beijing.aliyuncs.com/babelHello.png" alt><br>babel调用了React的createElement方法，这也就是为什么，我们在webpack环境下，声明一个组件，明明没有用到React，也要去引入的原因。<br>那么这个函数是干嘛使得呢？o98k，接下来好好看看。</p>
<h3 id="createElemnt"><a href="#createElemnt" class="headerlink" title="createElemnt"></a>createElemnt</h3><p>首先把React源码的地址贴上，<a href="https://xuyonglinblog.oss-cn-beijing.aliyuncs.com/react.development.js" target="_blank" rel="noopener">REACT源码</a>，有兴趣的小伙伴可以复制下来看看。<br>在React0.15版本中用到的是createClass方法，但是这个方法貌似已经过时了，16版本用的就是createElement。</p>
<p>在源码的481行，可以找到这个函数，他有三个参数：</p>
<ul>
<li>type 标签名</li>
<li>config 配置信息className，事件啥的，没有则为null</li>
<li>children 标签里面的元素如：上述hello组件中调用createElelment时，children值就是’hello’，有意思的时当里面的元素是嵌套了一层的话，比如<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">return</span> (&lt;div&gt;&lt;p&gt;sss&lt;/p&gt;&lt;/div&gt;)</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>那么children对应的值就是React.createElement的返回结果。<br>这在babel网站上会看的很清楚，比如声明一个组件和渲染一个组件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">TodoItem</span></span>()&#123;</span><br><span class="line">  reutn (&lt;div className=<span class="string">"foo"</span>  onClick=&#123;()=&gt;&#123;cconsole.log(<span class="string">'sss'</span>)&#125;&#125; &gt;</span><br><span class="line">           &lt;p&gt;sss&lt;/p&gt;</span><br><span class="line">        &lt;/div&gt;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;TodoItem /&gt;</span><br></pre></td></tr></table></figure>
<p>在右边可以看到如下代码<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"use strict"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">TodoItem</span></span>() &#123;</span><br><span class="line">  reutn(React.createElement(</span><br><span class="line">    <span class="string">"div"</span>,</span><br><span class="line">    &#123; className: <span class="string">"foo"</span>, onClick: <span class="keyword">function</span> <span class="function"><span class="title">onClick</span></span>() &#123;</span><br><span class="line">        cconsole.log(<span class="string">'sss'</span>);</span><br><span class="line">      &#125; &#125;,</span><br><span class="line">    React.createElement(</span><br><span class="line">      <span class="string">"p"</span>,</span><br><span class="line">      null,</span><br><span class="line">      <span class="string">"sss"</span></span><br><span class="line">    )</span><br><span class="line">  ));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">React.createElement(TodoItem, null);</span><br></pre></td></tr></table></figure></p>
<p>可以看到无论是原生标签还是自定义组件标签，React都会调用createElement进行处理，而处理的结果我们可以从接下来的源码里寻找。</p>
<p>createElement源码：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * Create and <span class="built_in">return</span> a new ReactElement of the given <span class="built_in">type</span>.</span><br><span class="line"> * See https://reactjs.org/docs/react-api.html<span class="comment">#createelement</span></span><br><span class="line"> */</span><br><span class="line"><span class="keyword">function</span> createElement(<span class="built_in">type</span>, config, children) &#123;</span><br><span class="line">  var propName;</span><br><span class="line"></span><br><span class="line">  // 内置静态变量，作为参数传递给ReactElement方法</span><br><span class="line"></span><br><span class="line">  //属性承载的容器，子组件内部就是通过这个对象访问对应的属性</span><br><span class="line">  var props = &#123;&#125;;</span><br><span class="line"></span><br><span class="line">  var key = null;</span><br><span class="line">  var ref = null;</span><br><span class="line">  var self = null;</span><br><span class="line">  var <span class="built_in">source</span> = null;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (config != null) &#123;</span><br><span class="line">    <span class="keyword">if</span> (hasValidRef(config)) &#123;</span><br><span class="line">      ref = config.ref;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (hasValidKey(config)) &#123;</span><br><span class="line">      key = <span class="string">''</span> + config.key;</span><br><span class="line">    &#125;</span><br><span class="line">    //todo self 和 <span class="built_in">source</span> 都是通过 props 传入的</span><br><span class="line">    self = config.__self === undefined ? null : config.__self;</span><br><span class="line">    <span class="built_in">source</span> = config.__source === undefined ? null : config.__source;</span><br><span class="line">    // Remaining properties are added to a new props object</span><br><span class="line">    <span class="keyword">for</span> (propName <span class="keyword">in</span> config) &#123;</span><br><span class="line">        // 检验是不是 OwnProperty，且不能是保留的名称。属性名不能是 key, ref, __self 和 __source</span><br><span class="line">        <span class="keyword">if</span> (hasOwnProperty.call(config, propName) &amp;&amp; !RESERVED_PROPS.hasOwnProperty(propName)) &#123;</span><br><span class="line">        props[propName] = config[propName];</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  //todo createElement 可以接受不止三个参数，在 children 后面传入更多的参数，表示有更多的 child，因此这里要把它们收集起来。</span><br><span class="line">  var childrenLength = arguments.length - 2;</span><br><span class="line">  <span class="keyword">if</span> (childrenLength === 1) &#123;</span><br><span class="line">    props.children = children;</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (childrenLength &gt; 1) &#123;</span><br><span class="line">    var childArray = Array(childrenLength);</span><br><span class="line">    <span class="keyword">for</span> (var i = 0; i &lt; childrenLength; i++) &#123;</span><br><span class="line">      childArray[i] = arguments[i + 2];</span><br><span class="line">    &#125;</span><br><span class="line">    &#123;</span><br><span class="line">      //Object.freeze使对象不可扩展，对象的属性不可删除，不可修改</span><br><span class="line">      <span class="keyword">if</span> (Object.freeze) &#123;</span><br><span class="line">        Object.freeze(childArray);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    props.children = childArray;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  //todo 把组件的默认属性值赋予组件的实例上</span><br><span class="line">  // Resolve default props</span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">type</span> &amp;&amp; type.defaultProps) &#123;</span><br><span class="line">    var defaultProps = type.defaultProps;</span><br><span class="line">    <span class="keyword">for</span> (propName <span class="keyword">in</span> defaultProps) &#123;</span><br><span class="line">      <span class="keyword">if</span> (props[propName] === undefined) &#123;</span><br><span class="line">        props[propName] = defaultProps[propName];</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="keyword">if</span> (key || ref) &#123;</span><br><span class="line">      <span class="keyword">if</span> (typeof props.$<span class="variable">$typeof</span> === <span class="string">'undefined'</span> || props.$<span class="variable">$typeof</span> !== REACT_ELEMENT_TYPE) &#123;</span><br><span class="line">        var displayName = typeof <span class="built_in">type</span> === <span class="string">'function'</span> ? type.displayName || type.name || <span class="string">'Unknown'</span> : <span class="built_in">type</span>;</span><br><span class="line">        <span class="keyword">if</span> (key) &#123;</span><br><span class="line">          defineKeyPropWarningGetter(props, displayName);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (ref) &#123;</span><br><span class="line">          defineRefPropWarningGetter(props, displayName);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">return</span> ReactElement(<span class="built_in">type</span>, key, ref, self, <span class="built_in">source</span>, ReactCurrentOwner.current, props);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>看到这里，其实还有点模糊，这个方法是干嘛的，在整个生命周期起到了一个什么作用。<br>但是可以在最后看到createElement的返回值其实就是ReactElement方法的返回值，那么接下来就看看ReactElelment，是干啥的。</p>
<h3 id="ReactElement"><a href="#ReactElement" class="headerlink" title="ReactElement"></a>ReactElement</h3><p>先看参数</p>
<ul>
<li>type: 使用 React.createElement创建的 React 组件</li>
<li>key: 使用 React 组件创建的 ReactElement 的 key，DOM结构标识，提升update性能</li>
<li>ref: 这个 ReactElement 的 ref，真实DOM的引用</li>
<li>props：子结构相关信息(有则增加children字段/没有为空)和组件属性(如style)</li>
<li>self: 用来记录当前元素所在的环境，因为创建组件的时候是一个递归的过程，就像之前，提到的hello嵌套组件，所以有必要对于每一层的组件保存this。</li>
<li>source: 中包含了一些文件名称，行号等信息。</li>
<li>owner: 用来记录该元素所属的组件。值为创建当前组件的对象，默认值为null。<br>ReactElement 这个函数只是将以上参数放入一个对象，并返回。<br>源码如下：<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * Factory method to create a new React element. This no longer adheres to</span><br><span class="line"> * the class pattern, so <span class="keyword">do</span> not use new to call it. Also, no instanceof check</span><br><span class="line"> * will work. Instead <span class="built_in">test</span> $<span class="variable">$typeof</span> field against Symbol.for(<span class="string">'react.element'</span>) to check</span><br><span class="line"> * <span class="keyword">if</span> something is a React Element.</span><br><span class="line"> *</span><br><span class="line"> * @param &#123;*&#125; <span class="built_in">type</span></span><br><span class="line"> * @param &#123;*&#125; key</span><br><span class="line"> * @param &#123;string|object&#125; ref</span><br><span class="line"> * @param &#123;*&#125; self A *temporary* helper to detect places <span class="built_in">where</span> `this` is</span><br><span class="line"> * different from the `owner` when React.createElement is called, so that we</span><br><span class="line"> * can warn. We want to get rid of owner and replace string `ref`s with arrow</span><br><span class="line"> * <span class="built_in">functions</span>, and as long as `this` and owner are the same, there will be no</span><br><span class="line"> * change <span class="keyword">in</span> behavior.</span><br><span class="line"> * @param &#123;*&#125; <span class="built_in">source</span> An annotation object (added by a transpiler or otherwise)</span><br><span class="line"> * indicating filename, line number, and/or other information.</span><br><span class="line"> * @param &#123;*&#125; owner</span><br><span class="line"> * @param &#123;*&#125; props</span><br><span class="line"> * @internal</span><br><span class="line"> */</span><br><span class="line">var ReactElement = <span class="keyword">function</span> (<span class="built_in">type</span>, key, ref, self, <span class="built_in">source</span>, owner, props) &#123;</span><br><span class="line">  var element = &#123;</span><br><span class="line">    //作为ReactElement的标识，运用ES6的Symbol</span><br><span class="line">    $<span class="variable">$typeof</span>: REACT_ELEMENT_TYPE,</span><br><span class="line"></span><br><span class="line">    // Built-in properties that belong on the element</span><br><span class="line">    <span class="built_in">type</span>: <span class="built_in">type</span>,</span><br><span class="line">    key: key,</span><br><span class="line">    ref: ref,</span><br><span class="line">    props: props,</span><br><span class="line"></span><br><span class="line">    // Record the component responsible <span class="keyword">for</span> creating this element.</span><br><span class="line">    _owner: owner</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  &#123;</span><br><span class="line"></span><br><span class="line">    element._store = &#123;&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    Object.defineProperty(element._store, <span class="string">'validated'</span>, &#123;</span><br><span class="line">      configurable: <span class="literal">false</span>,</span><br><span class="line">      enumerable: <span class="literal">false</span>,</span><br><span class="line">      writable: <span class="literal">true</span>,</span><br><span class="line">      value: <span class="literal">false</span></span><br><span class="line">    &#125;);</span><br><span class="line">    // self and <span class="built_in">source</span> are DEV only properties.</span><br><span class="line">    Object.defineProperty(element, <span class="string">'_self'</span>, &#123;</span><br><span class="line">      configurable: <span class="literal">false</span>,</span><br><span class="line">      enumerable: <span class="literal">false</span>,</span><br><span class="line">      writable: <span class="literal">false</span>,</span><br><span class="line">      value: self</span><br><span class="line">    &#125;);</span><br><span class="line">    // Two elements created <span class="keyword">in</span> two different places should be considered</span><br><span class="line">    // equal <span class="keyword">for</span> testing purposes and therefore we hide it from enumeration.</span><br><span class="line">    Object.defineProperty(element, <span class="string">'_source'</span>, &#123;</span><br><span class="line">      configurable: <span class="literal">false</span>,</span><br><span class="line">      enumerable: <span class="literal">false</span>,</span><br><span class="line">      writable: <span class="literal">false</span>,</span><br><span class="line">      value: <span class="built_in">source</span></span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">if</span> (Object.freeze) &#123;</span><br><span class="line">      Object.freeze(element.props);</span><br><span class="line">      Object.freeze(element);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">return</span> element;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>该方法在其他方法中也经常被调用，结果被return。</p>
<h3 id="React-Component"><a href="#React-Component" class="headerlink" title="React.Component"></a>React.Component</h3><p>我们在最开始声明的组件App，其实是继承React.Component类的子类，它的原型具有setState等方法。这样组件App已经有了最基本的雏形。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> Component(props, context, updater) &#123;</span><br><span class="line">  this.props = props;</span><br><span class="line">  this.context = context;</span><br><span class="line">  this.refs = emptyObject;</span><br><span class="line">  // We initialize the default updater but the real one gets injected by the</span><br><span class="line">  // renderer.</span><br><span class="line">  this.updater = updater || ReactNoopUpdateQueue;</span><br><span class="line">&#125;</span><br><span class="line">Component.prototype.setState = <span class="keyword">function</span> (partialState, callback) &#123;</span><br><span class="line">  !(typeof partialState === <span class="string">'object'</span> || typeof partialState === <span class="string">'function'</span> || partialState == null) ? invariant(<span class="literal">false</span>, <span class="string">'setState(...): takes an object of state variables to update or a function which returns an object of state variables.'</span>) : void 0;</span><br><span class="line">  this.updater.enqueueSetState(this, partialState, callback, <span class="string">'setState'</span>);</span><br><span class="line">&#125;;</span><br><span class="line">Component.prototype.forceUpdate = <span class="keyword">function</span> (callback) &#123;</span><br><span class="line">  this.updater.enqueueForceUpdate(this, callback, <span class="string">'forceUpdate'</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<p>贴张图<br><img src="https://xuyonglinblog.oss-cn-beijing.aliyuncs.com/ReactComponent.png" alt></p>
</div><div class="tags"><a href="../../../../tags/react/">react</a></div><div class="post-nav"><a class="pre" href="../../10/axioshhh/">axioshhh</a><a class="next" href="../../02/面试/">前端面试收集</a></div><div id="container"></div><link rel="stylesheet" type="text/css" href="//unpkg.com/gitalk/dist/gitalk.css?v=0.0.0"><script type="text/javascript" src="//cdn.bootcss.com/blueimp-md5/2.10.0/js/md5.js?v=0.0.0"></script><script type="text/javascript" src="//unpkg.com/gitalk/dist/gitalk.min.js?v=0.0.0"></script><script>var gitalk = new Gitalk({
  clientID: '9fc19543f349999565e8',
  clientSecret: 'daab664e11d913d9afd26317879e7df79c3bcb8b',
  repo: 'xuyonglin222.github.io',
  owner: 'xuyonglin222',
  admin: ['xuyonglin222'],
  id: md5(location.pathname),
  distractionFreeMode: false
})
gitalk.render('container')
</script></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.baidu.com/baidu" method="get" accept-charset="utf-8" target="_blank"><input type="search" name="word" maxlength="20" placeholder="Search"><input type="hidden" name="si" value="http://xuyonglin222.github.io"><input name="tn" type="hidden" value="bds"><input name="cl" type="hidden" value="3"><input name="ct" type="hidden" value="2097152"><input name="s" type="hidden" value="on"></form></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="http://korion.cn/" title="cyy" target="_blank">cyy</a><ul></ul><a href="http://www.mochiko.cn/" title="李年糕" target="_blank">李年糕</a><ul></ul><a href="https://anrans.github.io" title="高鹏" target="_blank">高鹏</a><ul></ul><a href="https://blog.csdn.net/xiaoritai7803" title="书研Sister" target="_blank">书研Sister</a><ul></ul><a href="https://waynewang98.github.io" title="waynewang98" target="_blank">waynewang98</a><ul></ul><a href="https://dymonelewis.github.io" title="傻琪" target="_blank">傻琪</a><ul></ul><a href="https://blog.alan123.xyz/" title="alan" target="_blank">alan</a></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="../../../../categories/学习/">学习</a></li><li class="category-list-item"><a class="category-list-link" href="../../../../categories/指弹/">指弹</a></li><li class="category-list-item"><a class="category-list-link" href="../../../../categories/生活/">生活</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="../../../../tags/杂记/" style="font-size: 15px;">杂记</a> <a href="../../../../tags/javascript/" style="font-size: 15px;">javascript</a> <a href="../../../../tags/学习/" style="font-size: 15px;">学习</a> <a href="../../../../tags/vue/" style="font-size: 15px;">vue</a> <a href="../../../../tags/React-Native/" style="font-size: 15px;">React Native</a> <a href="../../../../tags/指弹/" style="font-size: 15px;">指弹</a> <a href="../../../../tags/About/" style="font-size: 15px;">About</a> <a href="../../../../tags/Hexo/" style="font-size: 15px;">Hexo</a> <a href="../../../../tags/react/" style="font-size: 15px;">react</a> <a href="../../../../tags/不知道归为哪一列系列/" style="font-size: 15px;">不知道归为哪一列系列</a> <a href="../../../../tags/koa/" style="font-size: 15px;">koa</a> <a href="../../../../tags/算法/" style="font-size: 15px;">算法</a> <a href="../../../../tags/http/" style="font-size: 15px;">http</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="../../../../2019/08/07/Quic/">Quic</a></li><li class="post-list-item"><a class="post-list-link" href="../../../../2019/07/25/MingJingNote/">由明镜项目引起的学习记录</a></li><li class="post-list-item"><a class="post-list-link" href="../../../../2019/07/22/封培总结/">封培总结</a></li><li class="post-list-item"><a class="post-list-link" href="../../../../2019/01/17/vue的diff/">vue的diff</a></li><li class="post-list-item"><a class="post-list-link" href="../../../../2019/01/04/react的setState/">react的setState</a></li><li class="post-list-item"><a class="post-list-link" href="../../../12/31/selfPromise/">selfPromise</a></li><li class="post-list-item"><a class="post-list-link" href="../../../12/07/git杂记/">git杂记</a></li><li class="post-list-item"><a class="post-list-link" href="../../../08/07/koaMiddle/">koaMiddleWare</a></li><li class="post-list-item"><a class="post-list-link" href="../../../07/25/sort/">sort</a></li><li class="post-list-item"><a class="post-list-link" href="../../../07/19/Ngnix/">Ngnix</a></li></ul></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2019 <a href="../../../../." rel="nofollow">庚庚.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="../../../../js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js" async></script><script type="text/javascript" src="../../../../js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css"><script type="text/javascript" src="../../../../js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="../../../../js/smartresize.js?v=0.0.0"></script></div></body></html>